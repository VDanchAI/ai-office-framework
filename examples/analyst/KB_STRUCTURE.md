# Структура базы знаний — Analyst KB v2.0

**Версия:** 2.0
**Размер:** 1318 строк
**Тип роутера:** Плоский (v5.2)
**Секций:** 8

---

## Заметка о типе роутера

**Плоский роутер** используется, когда в KB менее ~20 секций и запросы однозначно соответствуют одной секции за раз. Роутер читает запрос, определяет идентификатор секции и загружает только её — сохраняя экономное использование контекстного окна.

Для более сложных KB (20+ секций, перекрывающиеся домены, многошаговое извлечение) подошёл бы иерархический или семантический роутер. При 8 секциях плоская маршрутизация — правильный выбор.

---

## Таблица секций

| # | ID | Название | Назначение |
|---|---|---|---|
| 1 | `FORMULAS` | Формулы ключевых метрик | Определения и расчётные формулы для всех ключевых метрик: коэффициент конверсии, CAC, LTV, churn, ROI, ROAS, метрики email |
| 2 | `BENCHMARKS` | Отраслевые бенчмарки | Референсные значения по отраслям и каналам для контекстуализации показателей клиента |
| 3 | `ATTRIBUTION` | Модели атрибуции | Описание моделей атрибуции, соглашения по UTM-разметке, логика мультиканальной атрибуции |
| 4 | `DASHBOARDS` | Структура дашбордов | Паттерны компоновки дашбордов, выбор визуализации по типу метрики, периодичность обновления |
| 5 | `REPORTS` | Шаблоны отчётов | Стандартные форматы отчётов для еженедельного/ежемесячного/разового анализа |
| 6 | `FUNNELS` | Анализ воронки | Определения этапов воронки, бенчмарки конверсии, диагностика точек отвала |
| 7 | `RED_FLAGS` | Тревожные сигналы | Пороговые значения и паттерны, сигнализирующие о проблемах, требующих немедленного внимания |
| 8 | `QUICK_REFERENCE` | Быстрый справочник | Быстрый поиск ответа на частые однозначные вопросы (например, «какой хороший показатель открываемости?») |

---

## Как используется роутер

```
Запрос пользователя
    │
    ▼
Роутер v5.2 читает запрос
    │
    ├── совпадение по ключевым словам / намерению
    │
    ▼
Выбран идентификатор секции (например, «BENCHMARKS»)
    │
    ▼
В контекст загружается только эта секция
    │
    ▼
Аналитик применяет фреймворк CIRI для формирования вывода
```

---

## Фреймворк CIRI (применяется на этапе вывода)

KB предоставляет сырой справочный материал. Аналитик всегда оборачивает содержимое KB в структуру CIRI перед выдачей пользователю:

| Шаг | Что содержит |
|---|---|
| **C** — Context (Контекст) | Какова была ситуация / какие данные были предоставлены |
| **I** — Insight (Инсайт) | Что данные на самом деле означают |
| **R** — Recommendation (Рекомендация) | Что с этим делать |
| **I** — Impact (Эффект) | Каков ожидаемый результат этого действия |

CIRI не обеспечивается KB — это задача файла инструкций. KB хранит только фактический справочный контент.

---

## Заметки по проектированию

- Секции самодостаточны: каждую можно загрузить независимо, без обращения к другим секциям
- `QUICK_REFERENCE` намеренно дублирует часть содержимого других секций ради скорости — это сделано осознанно
- `RED_FLAGS` — единственная секция с жёсткими пороговыми значениями; все остальные секции используют диапазоны и контекстно-зависимые значения
- `FORMULAS` — наиболее часто загружаемая секция, поэтому намеренно сохраняется лаконичной
