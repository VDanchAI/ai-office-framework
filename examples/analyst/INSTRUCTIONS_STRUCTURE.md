# Структура инструкций — Analyst Instructions v2.4

**Версия:** 2.4
**Секций:** 9 (пронумерованы 0–8)
**Зависимость от Core:** Да (загружает общий Core ИИ-офиса при запуске)

---

## Карта секций

| # | Название | Назначение |
|---|---|---|
| 0 | Обязательное первое действие | Инициализирует бота — загружает Core раньше всего остального |
| 1 | Интеграция с Core | Определяет иерархию приоритетов между Core и правилами Аналитика |
| 2 | Основная идентичность | Определение роли, главная директива, Моя карточка |
| 3 | Область задач | Что обрабатывает этот бот + таблица делегирования |
| 4 | Железные правила | Жёсткие ограничения, которые нельзя переопределить |
| 5 | Источники данных | Откуда берутся данные, как их запрашивать |
| 6 | Рабочий процесс анализа | Пошаговый процесс от входных данных до вывода |
| 7 | Форматы вывода | Структуры карточки инсайта, отчёта, дашборд-брифа |
| 8 | Взаимодействие | Правила передачи задач и маршрутизации к другим ботам |

---

## Детали секций

### Секция 0 — Обязательное первое действие
**Назначение:** Гарантирует загрузку общего Core до начала любых действий бота.
**Ключевые элементы:**
- Явная инструкция загрузки файла Core
- Блокирует любой ответ до подтверждения загрузки Core
- Предотвращает работу бота в деградированном состоянии

---

### Секция 1 — Интеграция с Core
**Назначение:** Устанавливает, что происходит при конфликте правил Аналитика и Core.
**Ключевые элементы:**
- Иерархия приоритетов (Core > специфичные для Аналитика, с определёнными исключениями)
- Список переопределений Аналитика, имеющих приоритет над значениями Core по умолчанию
- Правила слияния для перекрывающихся поведений

---

### Секция 2 — Основная идентичность
**Назначение:** Определяет, кто такой этот бот и как он представляется.
**Ключевые элементы:**
- Название роли и однострочное описание
- Главная директива (дословно): «Каждый инсайт должен отвечать на вопрос "и что с этим делать?". Данные без рекомендации — это отчёт, не анализ.»
- Философское утверждение: переводчик с языка данных на язык решений
- Моя карточка — блок самопредставления, показываемый при первом взаимодействии

---

### Секция 3 — Область задач
**Назначение:** Чёткие границы того, что обрабатывает этот бот, а что нет.
**Ключевые элементы:**
- Таблица охватываемых доменов (Социальные сети, Email, Воронка, ROI контента, Удержание)
- Таблица делегирования — отображает запросы вне области задач на правильного бота
- Пограничные случаи (что делать, если запрос частично в области задач)

---

### Секция 4 — Железные правила
**Назначение:** Жёсткие ограничения, применяемые к каждому выводу без исключений.
**Ключевые элементы:**
- Никаких дампов данных — сырые числа никогда не выдаются без интерпретации
- CIRI всегда — каждый аналитический вывод следует схеме Context → Insight → Recommendation → Impact
- Никогда не выдумывать числа — если данных нет, бот говорит об этом и запрашивает их
- Действенное или ничего — если рекомендация невозможна, бот объясняет почему
- Дополнительные ограничения, специфичные для аналитической роли

---

### Секция 5 — Источники данных
**Назначение:** Определяет, откуда берутся данные и как бот запрашивает недостающие.
**Ключевые элементы:**
- Принимаемые типы источников данных (предоставленные пользователем, экспорты платформ, предыдущий диалог)
- Формат REQUEST — стандартизированная структура, используемая ботом при необходимости данных от пользователя
- Работа с неполными наборами данных
- Что делает бот, когда качество данных недостаточно для анализа

---

### Секция 6 — Рабочий процесс анализа
**Назначение:** Пошаговый процесс, которому следует бот от получения запроса до выдачи результата.
**Ключевые элементы:**
- Получить → Уточнить → Собрать данные → Проанализировать → Применить CIRI → Выдать
- Точки принятия решений на каждом этапе (когда продолжать, когда спрашивать)
- Как секции KB выбираются на этапе Анализа
- Проверка качества перед выдачей

---

### Секция 7 — Форматы вывода
**Назначение:** Шаблоны и структура для трёх основных типов вывода.
**Ключевые элементы:**
- **Карточка инсайта** — анализ одной метрики или одного вопроса (компактный CIRI)
- **Отчёт** — структурированный многометрический анализ с секциями
- **Дашборд-бриф** — рекомендации по компоновке дашборда и выбору KPI
- Правила форматирования (когда использовать таблицы, когда списки, рекомендации по длине)

---

### Секция 8 — Взаимодействие
**Назначение:** Правила передачи задач другим ботам ИИ-офиса.
**Ключевые элементы:**
- Условия триггера передачи (когда маршрутизировать, когда оставаться)
- Формат сообщения о передаче — какую информацию передавать принимающему боту
- Получение передачи — как обрабатывать входящий контекст от других ботов
- Предотвращение зацикливания — правила, исключающие отбивание запросов между ботами

---

## Паттерны проектирования

### Обеспечение CIRI
CIRI обеспечивается в двух местах: Секция 4 (Железные правила, как жёсткое ограничение) и Секция 7 (Форматы вывода, как структурный шаблон). Дублирование намеренно — Железные правила говорят «всегда делать CIRI», Форматы вывода показывают «вот как выглядит CIRI».

### Протокол источников данных
Формат REQUEST в Секции 5 — стандартизированный блок, который бот использует последовательно. Это позволяет пользователям легко распознавать, когда бот нуждается в данных и в каком формате их предоставлять.

### Сеть делегирования
Секция 3 (Область задач) и Секция 8 (Взаимодействие) работают в связке. Секция 3 определяет границы; Секция 8 определяет, что происходит на этих границах. Таблица делегирования в Секции 3 отражается правилами передачи в Секции 8.

### Секция 0 как механизм безопасности
Загрузка Core как обязательного первого действия (Секция 0) — структурный паттерн, используемый во всех ботах ИИ-офиса. Он гарантирует, что общие правила — включая этические ограничения и офисные протоколы — всегда активны, независимо от того, какие специфичные для бота инструкции следуют далее.
